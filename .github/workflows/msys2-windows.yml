name: CMake msys2 Windows 10

on:
  push:
  pull_request:
  schedule:
    - cron: '0 0 * * 3'
  workflow_dispatch:

jobs:
    build:
      runs-on: windows-latest
      strategy:
        fail-fast: false
        matrix:
          include:
          - { icon: 'ðŸŸ¦', sys: mingw64 }
      name: ðŸš§${{ matrix.icon }} ${{ matrix.sys }}
      defaults:
        run:
          shell: msys2 {0}
      steps:
      - name: 'ðŸ§° Checkout'
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: '${{ matrix.icon }} Setup MSYS2'
        uses: msys2/setup-msys2@v2
        with:
          msystem: ${{matrix.sys}}
          update: true
          install: >-
            git python cmake make base-devel gcc g++ fpc ninja libxslt-devel
            toolchain
      - name: 'ðŸš§ Build TOOL'
        run: |
          cmake -G Ninja -B build -DCMAKE_BUILD_TYPE=Release
          cmake --build build
